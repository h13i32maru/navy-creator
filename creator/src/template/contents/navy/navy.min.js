!function(){"use strict";window.Navy={};window.addEventListener("DOMContentLoaded",function(){if(Navy.UnitTest){return}Navy.App.initialize()});Navy.Class=function(e){var t;var i;var n;switch(arguments.length){case 2:n=Navy.Class._RootClass;t=arguments[0];i=arguments[1];break;case 3:if(typeof arguments[1]==="function"){n=arguments[1]}else{n=arguments[1].constructor}t=arguments[0];i=arguments[2];break;default:throw new Error("arguments of Navy.Class is 2 or 3.")}var a=Navy.Class._create(t,n,i);Navy.Class._setByReflection(t,a);return a};Navy.Class.instance=function e(e){var t=Navy.Class.apply(Navy,arguments);t.__manualInitialize__=true;var i=new t;var n=arguments[0];Navy.Class._setByReflection(n,i);return i};Navy.Class._RootClass=function t(){};Navy.Class._RootClass.prototype.initialize=function(){};Navy.Class._getByReflection=function i(e){var t=e.split(".");var i=window;for(var n=0;n<t.length;n++){i=i[t[n]]}return i};Navy.Class._setByReflection=function n(e,t){var i=e.split(".");var n=window;for(var a=0;a<i.length-1;a++){if(!(i[a]in n)){n[i[a]]={}}n=n[i[a]]}n[i[a]]=t};Navy.Class._create=function a(e,t,i){var n=e.replace(/[.]/g,"$");var a=new Function("return function "+n+" () { if (typeof this.initialize === 'function' && !this.constructor.__manualInitialize__) { this.initialize.apply(this, arguments); } }")();function s(){}s.prototype=t.prototype;var r=new s;var o=new s;a.prototype=r;var l;var u;if(i.$static){for(l in i.$static){var u=i.$static[l];if(typeof u==="function"){if(Navy.Class._argumentNames(u)[0]==="$super"){u=Navy.Class._wrapFunction(t,l,u)}}a[l]=u}delete i.$static}for(l in i){u=i[l];if(typeof u==="object"&&u!==null){if(l!=="$static"){throw new Error("object property must be primitive type. property = "+l)}}if(typeof u==="function"){if(Navy.Class._argumentNames(u)[0]==="$super"){u=Navy.Class._wrapFunction(o,l,u)}}a.prototype[l]=u}a.prototype.constructor=a;a.prototype.$className=e;a.prototype.$class=a;return a};Navy.Class._argumentNames=function s(e){var t=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length==1&&!t[0]?[]:t};Navy.Class._wrapFunction=function r(e,t,i){if(typeof e[t]!=="function"){throw new Error("override method must be function. function = "+t)}return function(){var n=this;var $super=function(){return e[t].apply(n,arguments)};var a=[$super].concat(Array.prototype.slice.call(arguments,0));return i.apply(this,a)}};Navy.Class("Navy.Notify",{_count:null,_callback:null,initialize:function(e,t){if(arguments.length===2){this.set(e,t)}},pass:function(){this._count--;if(this._count===0){this._execCallback()}},set:function(e,t){this._count=e;this._callback=t;if(e===0){this._execCallback()}},_execCallback:function(){setTimeout(this._callback,0)}});Navy.Class.instance("Navy.App",{_initRootBeforeCallback:null,initialize:function(){Navy.Resource.initialize();Navy.Config.initialize(this._onInitConfig.bind(this))},setInitRootBeforeCallback:function(e){this._initRootBeforeCallback=e},_onInitConfig:function(){this._initRootBeforeCallback&&this._initRootBeforeCallback();Navy.Root.initialize()}});Navy.Class.instance("Navy.Config",{app:null,scene:null,page:null,initialize:function(e){var t=new Navy.Notify(3,e);var i=t.pass.bind(t);this._loadAppJSON(i);this._loadSceneJSON(i);this._loadPageJSON(i)},_loadAppJSON:function(e){var t=new XMLHttpRequest;t.open("GET","config/app.json");t.onload=function(t){var i=t.target;this.app=JSON.parse(i.responseText);e()}.bind(this);t.send()},_loadSceneJSON:function(e){var t=new XMLHttpRequest;t.open("GET","config/scene.json");t.onload=function(t){var i=t.target;var n=JSON.parse(i.responseText);var a={};for(var s=0;s<n.length;s++){a[n[s].id]=n[s]}this.scene=a;e()}.bind(this);t.send()},_loadPageJSON:function(e){var t=new XMLHttpRequest;t.open("GET","config/page.json");t.onload=function(t){var i=t.target;var n=JSON.parse(i.responseText);var a={};for(var s=0;s<n.length;s++){a[n[s].id]=n[s]}this.page=a;e()}.bind(this);t.send()}});Navy.Class.instance("Navy.Resource",{_layouts:null,_scripts:null,_images:null,initialize:function(){this._layouts={};this._scripts={};this._images={}},loadLayout:function(e,t){if(this._layouts[e]){var i=this._layouts[e];var n=JSON.parse(i);t&&setTimeout(t.bind(null,n),0);return}var a=new XMLHttpRequest;a.open("GET",e);a.onload=function(i){var n=i.target;var a=n.responseText;this._layouts[e]=a;var s=JSON.parse(a);t(s)}.bind(this);a.send()},loadScript:function(e,t){if(this._scripts[e]){t&&setTimeout(t,0);return}var i=document.createElement("script");i.onload=function(){this._scripts[e]=true;t()}.bind(this);i.src=e;document.head.appendChild(i)},loadImage:function(e,t){if(this._images[e]){var i=this._images[e].width;var n=this._images[e].height;t&&setTimeout(t.bind(null,e,i,n),0);return}var a=new Image;a.onload=function(){this._images[e]={width:a.width,height:a.height};t(e,a.width,a.height)}.bind(this);a.src=e},getClass:function(e){var t=e.split(".");var i=window;for(var n=0;n<t.length;n++){i=i[t[n]]}return i}});Navy.Class("Navy.View.View",{SIZE_POLICY_FIXED:"fixed",SIZE_POLICY_WRAP_CONTENT:"wrapContent",_id:null,_page:null,_scene:null,_layout:null,_element:null,_parentView:null,initialize:function(e,t){if(e){this._id=e.id}this._layout=e;this._createElement(e);this._createExtraElement(e);this._execLink=this._execLink.bind(this);this.setLayout(e,t)},setLayout:function(e,t){if(!e){return}this._layout=e;var i=new Navy.Notify(2,function(){this._applyLayout(e);this._applyExtraLayout(e);t&&t(this)}.bind(this));var n=i.pass.bind(i);this._loadResource(e,n);this._loadExtraResource(e,n)},getLayout:function(){return this._cloneObject(this._layout)},_createElement:function(e){this._element=document.createElement("div")},_applyLayout:function(e){this._element.style.position="absolute";this.setVisible(e.visible);this.setPos(e.pos);this.setSizePolicy(e.sizePolicy);this.setSize(e.size);this.setBackgroundColor(e.backgroundColor);this.setLink(e.link)},_loadResource:function(e,t){t&&setTimeout(t,0)},_createExtraElement:function(e){},_applyExtraLayout:function(e){},_loadExtraResource:function(e,t){t&&setTimeout(t,0)},_setRawStyle:function(e){var t="";for(var i in e){var n=e[i];if(n!==undefined){var a=i.replace(/([A-Z])/g,"-$1").toLowerCase();if(a.indexOf("webkit")===0){a="-"+a}if(n===""){this._element.style[i]=""}else{t+=a+":"+n+";"}}}this._element.style.cssText+=t},_execLink:function(e){var t=this._layout.link.type;var i=this._layout.link.id;switch(t){case"page":this.getScene().linkPage(i);break;case"scene":Navy.Root.linkScene(i);break}},addRawEventListener:function(e,t){this._element.addEventListener(e,t)},removeRawEventListener:function(e,t){this._element.removeEventListener(e,t)},getId:function(){return this._id},setPage:function(e){this._page=e},getPage:function(){return this._page},setScene:function(e){this._scene=e},getScene:function(){return this._scene},getElement:function(){return this._element},setParent:function(e){this._parentView=e},getParent:function(){return this._parentView},destroy:function(){this._parentView.removeView(this);var e=Object.getOwnPropertyNames(this);for(var t=0;t<e.length;t++){this[e[t]]=null}},toJSON:function(){return this._layout},_cloneObject:function(e){return JSON.parse(JSON.stringify(e))},isVisible:function(){if(!this._layout.visible){return false}for(var e=this.getParent();e;e=e.getParent()){if(!e.isVisible()){return false}}return true},setVisible:function(e){this._layout.visible=e;if(e){this.setSizePolicy(this._layout.sizePolicy)}else{this._element.style.display="none"}},setBackgroundColor:function(e){this._layout.backgroundColor=e;this._element.style.backgroundColor=e},getBackgroundColor:function(){return this._layout.backgroundColor},setSizePolicy:function(e){if(!this.isVisible()){return}switch(e){case this.SIZE_POLICY_FIXED:this._element.style.display="block";break;case this.SIZE_POLICY_WRAP_CONTENT:this._element.style.display="inline";break;default:throw new Error("unknown size policy. "+this._layout.sizePolicy)}this._layout.sizePolicy=e},getSizePolicy:function(){return this._layout.sizePolicy},getSize:function(){switch(this._layout.sizePolicy){case this.SIZE_POLICY_WRAP_CONTENT:if(!this.isVisible()){return{width:-1,height:-1}}if(this._element.clientWidth||this._element.clientHeight){return{width:this._element.clientWidth,height:this._element.clientHeight}}else{return{width:this._element.scrollWidth,height:this._element.scrollHeight}}case this.SIZE_POLICY_FIXED:return{width:this._layout.size.width,height:this._layout.size.height};default:throw new Error("unknown size policy. "+this._layout.sizePolicy)}},setSize:function(e){if(!e){return}if(!this._layout.size){this._layout.size={}}var t="";if(typeof e.width==="number"){this._layout.size.width=e.width;t+="width:"+e.width+"px;"}if(typeof e.height==="number"){this._layout.size.height=e.height;t+="height:"+e.height+"px;"}this._element.style.cssText+=t},setPos:function(e){var t="";if(typeof e.x==="number"){var i=parseInt(e.x,10);this._layout.pos.x=i;t+="left:"+i+"px;"}if(typeof e.y==="number"){var n=parseInt(e.y,10);this._layout.pos.y=n;t+="top:"+n+"px;"}if(typeof e.z==="number"){var a=parseInt(e.z,10);this._layout.pos.z=a;t+="z-index:"+a+";"}this._element.style.cssText+=t},addPos:function(e){var t=this._layout.pos.x+(e.x||0);var i=this._layout.pos.y+(e.y||0);this.setPos({x:t,y:i})},getPos:function(){return this._cloneObject(this._layout.pos)},setLink:function(e){this._layout.link=e;if(e){this._element.addEventListener("touchend",this._execLink)}else{this._element.removeEventListener("touchend",this._execLink)}},getLink:function(){return this._cloneObject(this._layout.link)}});Navy.Class("Navy.View.Image",Navy.View.View,{_imgElm:null,initialize:function($super,e,t){$super(e,t)},_createExtraElement:function($super,e){$super(e);var t=document.createElement("img");this._element.appendChild(t);this._imgElm=t},_applyExtraLayout:function($super,e){},_loadExtraResource:function($super,e,t){if(e&&e.extra.src){this.setSrc(e.extra.src,function(){$super(e,t)})}else{$super(e,t)}},_onLoadImage:function(e,t,i){this._imgElm.src=e;if(this._layout.sizePolicy==this.SIZE_POLICY_WRAP_CONTENT){this.setSize({width:t,height:i})}},setSrc:function(e,t){this._layout.extra.src=e;Navy.Resource.loadImage(e,function(e,i,n){this._onLoadImage(e,i,n);t&&t()}.bind(this))},getSrc:function(){return this._layout.src}});Navy.Class("Navy.View.Text",Navy.View.View,{_textElement:null,initialize:function($super,e,t){$super(e,t)},_createExtraElement:function($super,e){$super(e);this._textElement=document.createElement("span");this._element.appendChild(this._textElement)},_applyExtraLayout:function($super,e){$super(e);if(!e.extra){return}this.setFontSize(e.extra.fontSize)},_loadExtraResource:function($super,e,t){this.setText(e.extra.text);$super(e,t)},setText:function(e){this._layout.extra.text=e;this._textElement.textContent=e},getText:function(){return this._layout.extra.text},setFontSize:function(e){this._layout.extra.fontSize=e;this._element.style.fontSize=e+"px"},getFontSize:function(){return this._layout.extra.fontSize}});Navy.Class("Navy.ViewGroup.ViewGroup",Navy.View.View,{_views:null,_viewsOrder:null,_initCallback:null,initialize:function($super,e,t){this._views={};this._viewsOrder=[];$super(e,t)},_loadExtraResource:function($super,e,t){if(e&&e.extra.contentLayoutFile){this._layout.extra.contentLayoutFile=e.extra.contentLayoutFile;this._initCallback=function(){$super(e,t)};Navy.Resource.loadLayout(e.extra.contentLayoutFile,this._onLoadContentLayout.bind(this))}else{this._layout&&(this._layout.extra.contentLayoutFile=null);$super(e,t)}},_onLoadContentLayout:function(e){var t=new Navy.Notify(e.length,this._initCallback);var i=t.pass.bind(t);for(var n=0;n<e.length;n++){var a=e[n];var s=Navy.Resource.getClass(a.class);var r=new s(a,i);this.addView(r)}},destroy:function($super){for(var e in this._views){var t=this._views[e];t.destroy()}$super()},setPage:function($super,e){$super(e);var t=this._views;for(var i in t){var n=t[i];n.setPage(e)}},setScene:function($super,e){$super(e);var t=this._views;for(var i in t){var n=t[i];n.setScene(e)}},findViewById:function(e){var t=e.split(".");var i=this._views[t[0]]||null;if(i){if(t.length===1){return i}else{t.shift();return i.findViewById(t.join("."))}}var n=this._views;for(var a in n){var i=n[a];if(i.findViewById){var s=i.findViewById(e);if(s){return s}}}return null},findViewByElement:function(e){var t=this._views;for(var i in t){var n=t[i];if(n.getElement()===e){return n}if(n.findViewByElement){var a=n.findViewByElement(e);if(a){return a}}}return null},getAllViews:function(){var e={};for(var t in this._views){e[t]=this._views[t]}return e},addView:function(e,t){var i=e.getElement();if(t){this._element.insertBefore(i,t.getElement())}else{this._element.appendChild(i)}this._views[e.getId()]=e;this._viewsOrder.push(e.getId());e.setParent(this);e.setPage(this.getPage());e.setScene(this.getScene())},removeView:function(e){var t=e.getElement();this._element.removeChild(t);this._views[e.getId()]=null;delete this._views[e.getId()];this._viewsOrder.splice(this._viewsOrder.indexOf(e.getId()),1);e.setParent(null)},removeAllViews:function(){var e=this._views;var t=Object.keys(e);for(var i=0;i<t.length;i++){var n=t[i];var a=e[n];this.removeView(a)}}});Navy.Class("Navy.Page",Navy.ViewGroup.ViewGroup,{initialize:function($super,e,t){$super(e,t)},setLayout:function($super,e,t){e.visible=true;e.pos={x:0,y:0};e.sizePolicy=this.SIZE_POLICY_FIXED;e.size={width:Navy.Config.app.size.width,height:Navy.Config.app.size.height};$super(e,t)},setPage:function($super,e){},getPage:function(){return this},onCreate:function(){console.log("onCreate",this.$className)},onResumeBefore:function(){console.log("onResumeBefore",this.$className)},onResumeAfter:function(){console.log("onResumeAfter",this.$className)},onPauseBefore:function(){console.log("onPauseBefore",this.$className)},onPauseAfter:function(){console.log("onPauseAfter",this.$className)},onDestroy:function(){console.log("onDestroy",this.$className)}});Navy.Class.instance("Navy.Root",Navy.ViewGroup.ViewGroup,{_sceneStack:null,initialize:function($super){$super();this._id="$root";this._layout={visible:true};this._initDocument();var e=document.createElement("div");e.style.cssText="position:absolute; width:100%; height:100%; overflow:hidden;";document.body.appendChild(e);this._element=e;this._sceneStack=[];var t=Navy.Config.app.start.scene;this.nextScene(t)},getCurrentScene:function(){var e=this._getCurrentStack();return e.scene},getCurrentPage:function(){var e=this.getCurrentScene();return e.getCurrentPage()},linkScene:function(e){if(e==="$back"){this.backScene()}else{this.nextScene(e)}},nextScene:function(e){this._createScene(e,this._addScene.bind(this))},backScene:function(){if(this._sceneStack.length>=2){var e=this._getPrevStack();e.scene.onResumeBefore();var t=this._getCurrentStack();t.scene.onPauseBefore();t.transition.back(this._onTransitionBackEnd.bind(this))}},_initDocument:function(){var e="* {margin:0; padding:0; -webkit-user-select: none; -webkit-user-drag:none;} html {width:100%; height:100%} body {background-color:#000;}";var t=document.createElement("style");t.textContent=e;document.head.appendChild(t);var i=Navy.Config.app.size.width;var n=Navy.Config.app.size.height;var a=window.innerWidth;var s=window.innerHeight;var r=a/i;var o=s/n;var l=Math.min(r,o);var u=(a-l*i)/2;var f=(s-l*n)/2;document.body.style.position="absolute";document.body.style.zoom=l;document.body.style.width=i+"px";document.body.style.height=n+"px";document.body.style.left=u/l+"px";document.body.style.top=f/l+"px"},_createScene:function(e,t){var i=Navy.Config.scene[e];Navy.Resource.loadScript(i.classFile,this._onLoadScript.bind(this,i,t))},_onLoadScript:function(e,t){var i=Navy.Resource.getClass(e.class);new i(e,t)},_addScene:function(e){e.onCreate();e.onResumeBefore();var t=this._getCurrentStack();if(t){var i=t.scene;i.onPauseBefore()}var n=Navy.Resource.getClass(e.getLayout().extra.transition.class);var a=new n(i,e);this._sceneStack.push({scene:e,transition:a});this.addView(e);a.start(this._onTransitionStartEnd.bind(this))},_removeCurrentScene:function(){var e=this._sceneStack.pop();e.scene.destroy()},_getCurrentStack:function(){if(this._sceneStack.length>=1){return this._sceneStack[this._sceneStack.length-1]}else{return null}},_getPrevStack:function(){if(this._sceneStack.length>=2){return this._sceneStack[this._sceneStack.length-2]}else{return null}},_onTransitionStartEnd:function(){var e=this._getPrevStack();if(e){e.scene.onPauseAfter()}var t=this._getCurrentStack();if(t){t.scene.onResumeAfter()}},_onTransitionBackEnd:function(){var e=this._getPrevStack();if(e){e.scene.onResumeAfter()}var t=this._getCurrentStack();if(t){t.scene.onPauseAfter();t.scene.onDestroy();this._removeCurrentScene()}}});Navy.Class("Navy.Scene",Navy.ViewGroup.ViewGroup,{_pageStack:null,_sceneFixedFirstView:null,initialize:function($super,e,t){this._pageStack=[];$super(e,function(){var i=this._viewsOrder[0];this._sceneFixedFirstView=this._views[i];this.nextPage(e.extra.page,t.bind(null,this))}.bind(this))},setLayout:function($super,e,t){e.visible=true;e.pos={x:0,y:0};e.sizePolicy=this.SIZE_POLICY_FIXED;e.size={width:Navy.Config.app.size.width,height:Navy.Config.app.size.height};$super(e,t)},setPage:function(e){},getPage:function(){return null},setScene:function(e){},getScene:function(){return this},getCurrentPage:function(){var e=this._getCurrentStack();return e.page},linkPage:function(e){if(e==="$back"){this.backPage()}else{this.nextPage(e)}},nextPage:function(e,t){this._createPage(e,function(e){this._addPage(e);t&&t(e)}.bind(this))},backPage:function(){if(this._pageStack.length>=2){var e=this._pageStack[this._pageStack.length-1];var t=e.transition;t.back(this._onTransitionBackEnd.bind(this))}},onCreate:function(){console.log("onCreate",this.$className)},onResumeBefore:function(){console.log("onResumeBefore",this.$className)},onResumeAfter:function(){console.log("onResumeAfter",this.$className)},onPauseBefore:function(){console.log("onPauseBefore",this.$className)},onPauseAfter:function(){console.log("onPauseAfter",this.$className)},onDestroy:function(){console.log("onDestroy",this.$className)},_createPage:function(e,t){var i=Navy.Config.page[e];Navy.Resource.loadScript(i.classFile,this._onLoadScript.bind(this,i,t))},_createPageByLayout:function(e,t){var i=Navy.Resource.getClass(e.class);new i(e,t)},_onLoadScript:function(e,t){var i=Navy.Resource.getClass(e.class);new i(e,t)},_addPage:function(e){e.onCreate();e.onResumeBefore();var t=this._getCurrentStack();if(t){var i=t.page;i.onPauseBefore()}var n=Navy.Resource.getClass(e.getLayout().extra.transition.class);var a=new n(i,e);this._pageStack.push({page:e,transition:a});this.addView(e,this._sceneFixedFirstView);a.start(this._onTransitionStartEnd.bind(this))},_getCurrentStack:function(){if(this._pageStack.length>=1){return this._pageStack[this._pageStack.length-1]}else{return null}},_getPrevStack:function(){if(this._pageStack.length>=2){return this._pageStack[this._pageStack.length-2]}else{return null}},_onTransitionStartEnd:function(){var e=this._getPrevStack();if(e){e.page.onPauseAfter()}var t=this._getCurrentStack();if(t){t.page.onResumeAfter()}},_onTransitionBackEnd:function(){var e=this._getPrevStack();if(e){e.page.onResumeAfter()}var t=this._getCurrentStack();if(t){t.page.onPauseAfter();t.page.onDestroy();var i=this._pageStack.pop();i.page.destroy()}}});Navy.Class("Navy.Transition.Transition",{initialize:function(e,t){},start:function(e){},back:function(e){}});Navy.Class("Navy.Transition.Fade",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}e&&e._setRawStyle({webkitAnimation:"0.5s"});t&&t._setRawStyle({webkitAnimation:"0.5s",opacity:0})},_addAnimationStyle:function(){var e="@-webkit-keyframes fade_in  {100% {opacity: 1}}";var t="@-webkit-keyframes fade_out {100% {opacity: 0}}";var i=document.createElement("style");i.textContent=e+t;document.head.appendChild(i)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({opacity:""});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._beforeView._setRawStyle({webkitAnimationName:""});this._beforeView.removeRawEventListener("webkitAnimationEnd",t);this._afterView.addRawEventListener("webkitAnimationEnd",i);this._afterView._setRawStyle({opacity:0,webkitAnimationName:"fade_in"})}.bind(this);var i=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",i);this._afterView._setRawStyle({opacity:"",webkitAnimationName:"none"});e&&e()}.bind(this);this._beforeView.addRawEventListener("webkitAnimationEnd",t);this._beforeView._setRawStyle({webkitAnimationName:"fade_out"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"none"});this._beforeView.addRawEventListener("webkitAnimationEnd",i);this._beforeView._setRawStyle({opacity:0,webkitAnimationName:"fade_in"});this._beforeView.setVisible(true)}.bind(this);var i=function(){this._beforeView.removeRawEventListener("webkitAnimationEnd",i);this._beforeView._setRawStyle({opacity:"",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"fade_out"})}});Navy.Class("Navy.Transition.PopUp",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}t&&t._setRawStyle({webkitAnimation:"0.5s",webkitTransform:"scale(0)"})},_addAnimationStyle:function(){var e="@-webkit-keyframes pop_up_in  {100% {-webkit-transform: scale(1)}}";var t="@-webkit-keyframes pop_up_out {100% {-webkit-transform: scale(0)}}";var i=document.createElement("style");i.textContent=e+t;document.head.appendChild(i)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:""});e&&e();return}var t=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"pop_up_in"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.setVisible(false);this._beforeView.setVisible(true);e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"pop_up_out"})}});Navy.Class("Navy.Transition.SlideDown",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}var i=Navy.Config.app.size.height;t._setRawStyle({webkitAnimation:"0.5s",webkitTransform:"translateY(-"+i+"px)"})},_addAnimationStyle:function(){var e=Navy.Config.app.size.height;var t="@-webkit-keyframes slide_up_in  {100% {-webkit-transform: translateY(0)}}";var i="@-webkit-keyframes slide_up_out {100% {-webkit-transform: translateY(-%height%px)}}".replace("%height%",e);var n=document.createElement("style");n.textContent=t+i;document.head.appendChild(n)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:"none"});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_up_in"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",t);e&&e()}.bind(this);this._beforeView.setVisible(true);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_up_out"})}});Navy.Class("Navy.Transition.SlideLeft",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}var i=Navy.Config.app.size.width;t._setRawStyle({webkitAnimation:"0.5s",webkitTransform:"translateX(-"+i+"px)"})},_addAnimationStyle:function(){var e=Navy.Config.app.size.width;var t="@-webkit-keyframes slide_left_in  {100% {-webkit-transform: translateX(0)}}";var i="@-webkit-keyframes slide_left_out {100% {-webkit-transform: translateX(-%width%px)}}".replace("%width%",e);var n=document.createElement("style");n.textContent=t+i;document.head.appendChild(n)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:"none"});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_left_in"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",t);e&&e()}.bind(this);this._beforeView.setVisible(true);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_left_out"})}});Navy.Class("Navy.Transition.SlideRight",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}var i=Navy.Config.app.size.width;t._setRawStyle({webkitAnimation:"0.5s",webkitTransform:"translateX("+i+"px)"})},_addAnimationStyle:function(){var e=Navy.Config.app.size.width;var t="@-webkit-keyframes slide_right_in  {100% {-webkit-transform: translateX(0)}}";var i="@-webkit-keyframes slide_right_out {100% {-webkit-transform: translateX(%width%px)}}".replace("%width%",e);var n=document.createElement("style");n.textContent=t+i;document.head.appendChild(n)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:"none"});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_right_in"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",t);e&&e()}.bind(this);this._beforeView.setVisible(true);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_right_out"})}});Navy.Class("Navy.Transition.SlideUp",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}var i=Navy.Config.app.size.height;t._setRawStyle({webkitAnimation:"0.5s",webkitTransform:"translateY("+i+"px)"})},_addAnimationStyle:function(){var e=Navy.Config.app.size.height;var t="@-webkit-keyframes slide_up_in  {100% {-webkit-transform: translateY(0)}}";var i="@-webkit-keyframes slide_up_out {100% {-webkit-transform: translateY(%height%px)}}".replace("%height%",e);var n=document.createElement("style");n.textContent=t+i;document.head.appendChild(n)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:"none"});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_up_in"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",t);e&&e()}.bind(this);this._beforeView.setVisible(true);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimationName:"slide_up_out"})}});Navy.Class("Navy.Transition.TurnOver",Navy.Transition.Transition,{$static:{initAnimationStyle:false},_beforeView:null,_afterView:null,initialize:function(e,t){this._beforeView=e;this._afterView=t;if(!this.$class.initAnimationStyle){this._addAnimationStyle();this.$class.initAnimationStyle=true}e._setRawStyle({webkitAnimation:"0.25s",webkitAnimationTimingFunction:"linear",webkitTransform:"rotateY(0)"});t._setRawStyle({webkitAnimation:"0.25s",webkitAnimationTimingFunction:"linear",webkitTransform:"rotateY(-90deg)"})},_addAnimationStyle:function(){var e="      @-webkit-keyframes turn_over_in_before_view {100% {-webkit-transform: rotateY(90deg)} }      @-webkit-keyframes turn_over_in_after_view {100% {-webkit-transform: rotateY(0)} }";var t="      @-webkit-keyframes turn_over_out_before_view {100% {-webkit-transform: rotateY(0)} }      @-webkit-keyframes turn_over_out_after_view {100% {-webkit-transform: rotateY(-90deg)} }";var i=document.createElement("style");i.textContent=e+t;document.head.appendChild(i)},start:function(e){if(!this._beforeView){this._afterView._setRawStyle({webkitTransform:"none"});e&&e();return}var t=function(){this._beforeView.setVisible(false);this._beforeView.removeRawEventListener("webkitAnimationEnd",t);this._beforeView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});this._afterView.setVisible(true);this._afterView.addRawEventListener("webkitAnimationEnd",i);this._afterView._setRawStyle({webkitAnimationName:"turn_over_in_after_view"})}.bind(this);var i=function(){this._afterView.removeRawEventListener("webkitAnimationEnd",i);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.setVisible(false);this._beforeView.addRawEventListener("webkitAnimationEnd",t);this._beforeView._setRawStyle({webkitAnimationName:"turn_over_in_before_view"})},back:function(e){if(!this._beforeView){e&&e();return}var t=function(){this._afterView.setVisible(false);this._afterView.removeRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});this._beforeView._setRawStyle({webkitAnimation:"0.25s",webkitAnimationTimingFunction:"linear",webkitTransform:"rotateY(90deg)"});this._beforeView.setVisible(true);this._beforeView.addRawEventListener("webkitAnimationEnd",i);this._beforeView._setRawStyle({webkitAnimationName:"turn_over_out_before_view"})}.bind(this);var i=function(){this._beforeView.removeRawEventListener("webkitAnimationEnd",i);this._beforeView._setRawStyle({webkitTransform:"none",webkitAnimationName:"none"});e&&e()}.bind(this);this._afterView.addRawEventListener("webkitAnimationEnd",t);this._afterView._setRawStyle({webkitAnimation:"0.25s",webkitAnimationTimingFunction:"linear",webkitTransform:"rotateY(0)"});this._afterView._setRawStyle({webkitAnimationName:"turn_over_out_after_view"})}})}();